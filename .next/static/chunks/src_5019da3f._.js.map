{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/ImageUploader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface ImageUploaderProps {\n  onImageUpload: (file: File, dataUrl: string) => Promise<void>;\n  isLoading?: boolean;\n}\n\nexport default function ImageUploader({ onImageUpload, isLoading }: ImageUploaderProps) {\n  const [preview, setPreview] = useState<string | null>(null);\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        const dataUrl = reader.result as string;\n        setPreview(dataUrl);\n        await onImageUpload(file, dataUrl);\n      };\n      reader.readAsDataURL(file);\n    }\n  }, [onImageUpload]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      \"image/*\": [\".jpeg\", \".jpg\", \".png\", \".webp\"]\n    },\n    maxFiles: 1,\n    disabled: isLoading\n  });\n\n  return (\n    <div\n      {...getRootProps()}\n      className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n        isLoading\n          ? \"border-gray-300 bg-gray-50 cursor-not-allowed\"\n          : isDragActive\n          ? \"border-blue-500 bg-blue-50\"\n          : \"border-gray-300 hover:border-gray-400\"\n      }`}\n    >\n      <input {...getInputProps()} />\n      {isLoading ? (\n        <div className=\"text-gray-500\">\n          <p className=\"text-lg\">AI is processing...</p>\n          <div className=\"mt-2 animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500 mx-auto\"></div>\n        </div>\n      ) : preview ? (\n        <img src={preview} alt=\"Preview\" className=\"max-h-64 mx-auto\" />\n      ) : isDragActive ? (\n        <p className=\"text-lg text-blue-500\">Drop your photo here to start your pixel art journey...</p>\n      ) : (\n        <p className=\"text-lg\">Click or drag a photo to upload and experience AI pixel art fusion</p>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAHA;;;AAUe,SAAS,cAAc,EAAE,aAAa,EAAE,SAAS,EAAsB;;IACpF,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;6CAAE,OAAO;YAChC,MAAM,OAAO,aAAa,CAAC,EAAE;YAC7B,IAAI,MAAM;gBACR,MAAM,SAAS,IAAI;gBACnB,OAAO,SAAS;yDAAG;wBACjB,MAAM,UAAU,OAAO,MAAM;wBAC7B,WAAW;wBACX,MAAM,cAAc,MAAM;oBAC5B;;gBACA,OAAO,aAAa,CAAC;YACvB;QACF;4CAAG;QAAC;KAAc;IAElB,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,2KAAA,CAAA,cAAW,AAAD,EAAE;QAChE;QACA,QAAQ;YACN,WAAW;gBAAC;gBAAS;gBAAQ;gBAAQ;aAAQ;QAC/C;QACA,UAAU;QACV,UAAU;IACZ;IAEA,qBACE,6LAAC;QACE,GAAG,cAAc;QAClB,WAAW,CAAC,oEAAoE,EAC9E,YACI,kDACA,eACA,+BACA,yCACJ;;0BAEF,6LAAC;gBAAO,GAAG,eAAe;;;;;;YACzB,0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAU;;;;;;kCACvB,6LAAC;wBAAI,WAAU;;;;;;;;;;;uBAEf,wBACF,6LAAC;gBAAI,KAAK;gBAAS,KAAI;gBAAU,WAAU;;;;;uBACzC,6BACF,6LAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,6LAAC;gBAAE,WAAU;0BAAU;;;;;;;;;;;;AAI/B;GAnDwB;;QAgBgC,2KAAA,CAAA,cAAW;;;KAhB3C","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/BackgroundSelector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ninterface Background {\n  id: string;\n  name: string;\n  url: string;\n}\n\ninterface BackgroundSelectorProps {\n  onBackgroundSelect: (background: Background) => void;\n  selectedBackground: Background | null;\n}\n\n// 默认背景列表\nconst defaultBackgrounds: Background[] = [\n  {\n    id: \"1\",\n    name: \"Plains\",\n    url: \"/backgrounds/plains.jpg\"\n  },\n  {\n    id: \"2\",\n    name: \"Desert\",\n    url: \"/backgrounds/desert.jpg\"\n  },\n  {\n    id: \"3\",\n    name: \"Snow\",\n    url: \"/backgrounds/snow.jpg\"\n  }\n];\n\nexport default function BackgroundSelector({ onBackgroundSelect, selectedBackground }: BackgroundSelectorProps) {\n  return (\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n      {defaultBackgrounds.map((bg) => (\n        <div\n          key={bg.id}\n          className={`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${\n            selectedBackground?.id === bg.id ? \"border-blue-500 scale-105\" : \"border-transparent hover:border-gray-300\"\n          }`}\n          onClick={() => onBackgroundSelect(bg)}\n        >\n          <img\n            src={bg.url}\n            alt={bg.name}\n            className=\"w-full h-32 object-cover\"\n          />\n          <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 text-sm\">\n            {bg.name}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAAA;;AAeA,SAAS;AACT,MAAM,qBAAmC;IACvC;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;IACA;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;IACA;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;CACD;AAEc,SAAS,mBAAmB,EAAE,kBAAkB,EAAE,kBAAkB,EAA2B;IAC5G,qBACE,6LAAC;QAAI,WAAU;kBACZ,mBAAmB,GAAG,CAAC,CAAC,mBACvB,6LAAC;gBAEC,WAAW,CAAC,2EAA2E,EACrF,oBAAoB,OAAO,GAAG,EAAE,GAAG,8BAA8B,4CACjE;gBACF,SAAS,IAAM,mBAAmB;;kCAElC,6LAAC;wBACC,KAAK,GAAG,GAAG;wBACX,KAAK,GAAG,IAAI;wBACZ,WAAU;;;;;;kCAEZ,6LAAC;wBAAI,WAAU;kCACZ,GAAG,IAAI;;;;;;;eAZL,GAAG,EAAE;;;;;;;;;;AAkBpB;KAvBwB","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/CanvasEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\n\ninterface CanvasEditorProps {\n  personImage: string | null;\n  background: { url: string } | null;\n  onCanvasUpdate: (dataUrl: string) => void;\n}\n\nexport default function CanvasEditor({ personImage, background, onCanvasUpdate }: CanvasEditorProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [scale, setScale] = useState(1);\n\n  useEffect(() => {\n    if (!canvasRef.current || !personImage || !background) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const bgImg = new Image();\n    const fgImg = new Image();\n\n    bgImg.onload = () => {\n      canvas.width = bgImg.width;\n      canvas.height = bgImg.height;\n      ctx.drawImage(bgImg, 0, 0);\n\n      fgImg.src = personImage;\n    };\n\n    fgImg.onload = () => {\n      const scaledWidth = fgImg.width * scale;\n      const scaledHeight = fgImg.height * scale;\n      ctx.drawImage(fgImg, position.x, position.y, scaledWidth, scaledHeight);\n      onCanvasUpdate(canvas.toDataURL());\n    };\n\n    bgImg.src = background.url;\n  }, [personImage, background, position, scale, onCanvasUpdate]);\n\n  // 修复滚轮缩放 passive 警告\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    function handleWheel(e: WheelEvent) {\n      e.preventDefault();\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      setScale(prev => Math.max(0.1, Math.min(5, prev * delta)));\n    }\n    canvas.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => {\n      canvas.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, []);\n\n  const handleMouseDown = () => {\n    setIsDragging(true);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDragging) return;\n    setPosition(prev => ({\n      x: prev.x + e.movementX,\n      y: prev.y + e.movementY\n    }));\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  return (\n    <div className=\"relative w-full aspect-video\">\n      <canvas\n        ref={canvasRef}\n        className=\"w-full h-full object-contain cursor-move\"\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n      />\n      <div className=\"absolute bottom-4 left-4 bg-black bg-opacity-50 text-white p-2 rounded text-sm\">\n        Drag/scale the character to achieve the best pixel art effect\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;;;AAFA;;AAUe,SAAS,aAAa,EAAE,WAAW,EAAE,UAAU,EAAE,cAAc,EAAqB;;IACjG,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAqB;IAC5C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,GAAG;QAAG,GAAG;IAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY;YAEvD,MAAM,SAAS,UAAU,OAAO;YAChC,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YAEV,MAAM,QAAQ,IAAI;YAClB,MAAM,QAAQ,IAAI;YAElB,MAAM,MAAM;0CAAG;oBACb,OAAO,KAAK,GAAG,MAAM,KAAK;oBAC1B,OAAO,MAAM,GAAG,MAAM,MAAM;oBAC5B,IAAI,SAAS,CAAC,OAAO,GAAG;oBAExB,MAAM,GAAG,GAAG;gBACd;;YAEA,MAAM,MAAM;0CAAG;oBACb,MAAM,cAAc,MAAM,KAAK,GAAG;oBAClC,MAAM,eAAe,MAAM,MAAM,GAAG;oBACpC,IAAI,SAAS,CAAC,OAAO,SAAS,CAAC,EAAE,SAAS,CAAC,EAAE,aAAa;oBAC1D,eAAe,OAAO,SAAS;gBACjC;;YAEA,MAAM,GAAG,GAAG,WAAW,GAAG;QAC5B;iCAAG;QAAC;QAAa;QAAY;QAAU;QAAO;KAAe;IAE7D,oBAAoB;IACpB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YACb,SAAS,YAAY,CAAa;gBAChC,EAAE,cAAc;gBAChB,MAAM,QAAQ,EAAE,MAAM,GAAG,IAAI,MAAM;gBACnC;0DAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,OAAO;;YACpD;YACA,OAAO,gBAAgB,CAAC,SAAS,aAAa;gBAAE,SAAS;YAAM;YAC/D;0CAAO;oBACL,OAAO,mBAAmB,CAAC,SAAS;gBACtC;;QACF;iCAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,cAAc;IAChB;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,YAAY;QACjB,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,KAAK,CAAC,GAAG,EAAE,SAAS;gBACvB,GAAG,KAAK,CAAC,GAAG,EAAE,SAAS;YACzB,CAAC;IACH;IAEA,MAAM,gBAAgB;QACpB,cAAc;IAChB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,KAAK;gBACL,WAAU;gBACV,aAAa;gBACb,aAAa;gBACb,WAAW;gBACX,cAAc;;;;;;0BAEhB,6LAAC;gBAAI,WAAU;0BAAiF;;;;;;;;;;;;AAKtG;GAhFwB;KAAA","debugId":null}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n \nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n} "],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/ui/button.tsx"],"sourcesContent":["import { ButtonHTMLAttributes, forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\n  size?: \"default\" | \"sm\" | \"lg\" | \"icon\";\n}\n\nconst Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = \"default\", size = \"default\", ...props }, ref) => {\n    return (\n      <button\n        className={cn(\n          \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\n          {\n            \"bg-primary text-primary-foreground shadow hover:bg-primary/90\": variant === \"default\",\n            \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\": variant === \"destructive\",\n            \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\": variant === \"outline\",\n            \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\": variant === \"secondary\",\n            \"hover:bg-accent hover:text-accent-foreground\": variant === \"ghost\",\n            \"text-primary underline-offset-4 hover:underline\": variant === \"link\",\n            \"h-9 px-4 py-2\": size === \"default\",\n            \"h-8 rounded-md px-3 text-xs\": size === \"sm\",\n            \"h-10 rounded-md px-8\": size === \"lg\",\n            \"h-9 w-9\": size === \"icon\",\n          },\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\n\nButton.displayName = \"Button\";\n\nexport { Button }; "],"names":[],"mappings":";;;;AAAA;AACA;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,OACtB,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG,OAAO,EAAE;IAC/D,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qNACA;YACE,iEAAiE,YAAY;YAC7E,gFAAgF,YAAY;YAC5F,6FAA6F,YAAY;YACzG,0EAA0E,YAAY;YACtF,gDAAgD,YAAY;YAC5D,mDAAmD,YAAY;YAC/D,iBAAiB,SAAS;YAC1B,+BAA+B,SAAS;YACxC,wBAAwB,SAAS;YACjC,WAAW,SAAS;QACtB,GACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAGF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/AIBlendButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface AIBlendButtonProps {\n  canvasImage: string | null;\n  backgroundUrl: string;\n  disabled?: boolean;\n  onBlendComplete: (blendedImage: string) => void;\n}\n\n// Cloudinary 上传函数\nasync function uploadToCloudinary(base64: string): Promise<string> {\n  const formData = new FormData();\n  formData.append(\"file\", base64);\n  formData.append(\"upload_preset\", \"haotian\");\n  \n  const response = await fetch(\"/api/upload\", {\n    method: \"POST\",\n    body: formData,\n  });\n  \n  const data = await response.json();\n  if (data.url) return data.url;\n  throw new Error(data.error || \"Cloudinary upload failed\");\n}\n\nexport default function AIBlendButton({\n  canvasImage,\n  backgroundUrl,\n  disabled = false,\n  onBlendComplete,\n}: AIBlendButtonProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [hasResult, setHasResult] = useState(false);\n\n  const handleBlendCompleteWrapper = (blendedImage: string) => {\n    setHasResult(true);\n    onBlendComplete(blendedImage);\n  };\n\n  const handleClick = async () => {\n    console.log(\"🎯 AI融合按钮被点击\");\n    console.log(\"📦 当前状态:\", {\n      hasCanvasImage: !!canvasImage,\n      backgroundUrl,\n      disabled,\n      isLoading\n    });\n\n    if (!canvasImage) {\n      console.error(\"❌ 错误：canvasImage 为空\");\n      setError(\"Please adjust the character position first\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // 1. 上传到 Cloudinary\n      console.log(\"☁️ 开始上传图片到 Cloudinary...\");\n      const imageUrl = await uploadToCloudinary(canvasImage);\n      console.log(\"☁️ Cloudinary 上传成功，图片地址：\", imageUrl);\n\n      // 2. 调用 AI 融合 API（只传必需参数 input_image 和 prompt）\n      console.log(\"🔄 开始调用 AI 融合 API...\");\n      const response = await fetch(\"/api/ai-blend\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          input_image: imageUrl, // Cloudinary 上传后的图片 URL\n          prompt: \"A scene with modern architecture in the background: place the character at the left rule-of-thirds intersection, making them roughly one-third the height of the building; preserve the character's original illustration style untouched; harmonize the palette and lighting so the character's colors blend seamlessly into the background for a cohesive composition.\" // 只传必需参数\n        }),\n      });\n\n      console.log(\"📡 API 响应状态:\", response.status);\n      const data = await response.json();\n      console.log(\"📄 API 响应数据:\", data);\n\n      if (!response.ok) {\n        throw new Error(data.error || `HTTP error! status: ${response.status}`);\n      }\n\n      if (!data.result) {\n        throw new Error(\"AI blending failed: no result returned\");\n      }\n\n      console.log(\"✅ AI 融合成功，调用 onBlendComplete\");\n      handleBlendCompleteWrapper(data.result);\n    } catch (error) {\n      console.error(\"❌ AI 融合错误:\", error);\n      setError(error instanceof Error ? error.message : \"AI blending failed, please try again\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Button\n        onClick={handleClick}\n        disabled={disabled || isLoading || !canvasImage || hasResult}\n        className=\"w-full\"\n      >\n        {hasResult\n          ? \"Pixel Art Generated\"\n          : isLoading\n            ? (<><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />AI blending in progress...</>)\n            : \"Generate Pixel Art with One Click\"\n        }\n      </Button>\n      \n      {error && (\n        <div className=\"text-sm text-red-500 bg-red-50 p-3 rounded-md\">\n          {error}\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAaA,kBAAkB;AAClB,eAAe,mBAAmB,MAAc;IAC9C,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ;IACxB,SAAS,MAAM,CAAC,iBAAiB;IAEjC,MAAM,WAAW,MAAM,MAAM,eAAe;QAC1C,QAAQ;QACR,MAAM;IACR;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,IAAI,KAAK,GAAG,EAAE,OAAO,KAAK,GAAG;IAC7B,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;AAChC;AAEe,SAAS,cAAc,EACpC,WAAW,EACX,aAAa,EACb,WAAW,KAAK,EAChB,eAAe,EACI;;IACnB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,6BAA6B,CAAC;QAClC,aAAa;QACb,gBAAgB;IAClB;IAEA,MAAM,cAAc;QAClB,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,YAAY;YACtB,gBAAgB,CAAC,CAAC;YAClB;YACA;YACA;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,QAAQ,KAAK,CAAC;YACd,SAAS;YACT;QACF;QAEA,aAAa;QACb,SAAS;QAET,IAAI;YACF,oBAAoB;YACpB,QAAQ,GAAG,CAAC;YACZ,MAAM,WAAW,MAAM,mBAAmB;YAC1C,QAAQ,GAAG,CAAC,4BAA4B;YAExC,+CAA+C;YAC/C,QAAQ,GAAG,CAAC;YACZ,MAAM,WAAW,MAAM,MAAM,iBAAiB;gBAC5C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,aAAa;oBACb,QAAQ,2WAA2W,SAAS;gBAC9X;YACF;YAEA,QAAQ,GAAG,CAAC,gBAAgB,SAAS,MAAM;YAC3C,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,gBAAgB;YAE5B,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YACxE;YAEA,IAAI,CAAC,KAAK,MAAM,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC;YACZ,2BAA2B,KAAK,MAAM;QACxC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,qIAAA,CAAA,SAAM;gBACL,SAAS;gBACT,UAAU,YAAY,aAAa,CAAC,eAAe;gBACnD,WAAU;0BAET,YACG,wBACA,0BACG;;sCAAE,6LAAC,oNAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;wBAA8B;;mCACpD;;;;;;YAIP,uBACC,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX;GAhGwB;KAAA","debugId":null}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/ui/badge.tsx"],"sourcesContent":["import type * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/HeroSection.tsx"],"sourcesContent":["'use client';\n\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport Image from 'next/image';\nimport { ArrowRight } from 'lucide-react';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\nexport default function HeroSection() {\n  const { t } = useLanguage();\n\n  return (\n    <section className=\"relative gradient-hero py-20 sm:py-32\">\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n          {/* Left Content */}\n          <div className=\"space-y-8\">\n            <div className=\"space-y-4\">\n              <Badge variant=\"secondary\" className=\"bg-white/50 text-foreground border border-border/20\">\n                {t.hero.badge}\n              </Badge>\n\n              <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight\">\n                {t.hero.title}{' '}\n                <span className=\"text-[#a259ff]\">{t.hero.titleHighlight}</span>\n              </h1>\n\n              <p className=\"text-lg text-muted-foreground max-w-lg\">\n                {t.hero.description}\n              </p>\n            </div>\n\n            <Button\n              className=\"bg-gradient-to-r from-[#7c3aed] via-[#a855f7] to-[#c084fc] hover:shadow-glow transition-all duration-300 text-white px-8 py-6 text-lg border-0\"\n              style={{ backgroundImage: 'linear-gradient(135deg, #7c3aed 0%, #a855f7 50%, #c084fc 100%)' }}\n            >\n              {t.hero.cta}\n              <ArrowRight className=\"ml-2 h-5 w-5\" />\n            </Button>\n          </div>\n\n          {/* Right Image */}\n          <div className=\"relative max-w-[480px] max-h-[480px] w-full h-full mx-auto\">\n            <div className=\"relative bg-white rounded-2xl shadow-card p-2 sm:p-4\">\n              <div className=\"grid\" style={{ gridTemplateColumns: '1fr 48px 1fr' }}>\n                {/* Before 区域：上下两张图 */}\n                <div className=\"space-y-2 flex flex-col h-full justify-between\">\n                  <div>\n                    <div className=\"text-sm font-medium text-center bg-gray-100 rounded-lg py-1 mb-1\">\n                      Before\n                    </div>\n                    <div className=\"aspect-square rounded-lg overflow-hidden max-w-[140px] max-h-[140px] mx-auto\">\n                      <Image\n                        src=\"/demo/person.png\"\n                        alt=\"Before 1\"\n                        width={140}\n                        height={140}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"aspect-square rounded-lg overflow-hidden mt-1 max-w-[140px] max-h-[140px] mx-auto\">\n                      <Image\n                        src=\"/demo/desert.jpg\"\n                        alt=\"Before 2\"\n                        width={240}\n                        height={240}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                {/* 箭头区域（绝对定位SVG） */}\n                <div className=\"relative flex flex-col items-center justify-center\">\n                  {/* 上箭头：30度斜线 */}\n                  <svg style={{ position: 'absolute', top: '22%', left: 0, right: 0, maxWidth: '32px', maxHeight: '64px' }} width=\"32\" height=\"64\" viewBox=\"0 0 32 64\" fill=\"none\">\n                    <defs>\n                      <marker id=\"arrowhead1\" markerWidth=\"6\" markerHeight=\"6\" refX=\"4.8\" refY=\"3.2\" orient=\"auto\" markerUnits=\"strokeWidth\">\n                        <path d=\"M0,0 L6.4,3.2 L0,6.4 L1.6,3.2 L0,0\" fill=\"#a259ff\" />\n                      </marker>\n                    </defs>\n                    <line x1=\"6.4\" y1=\"11.2\" x2=\"25.6\" y2=\"48\" stroke=\"#a259ff\" strokeWidth=\"3.2\" markerEnd=\"url(#arrowhead1)\" />\n                  </svg>\n                  {/* 下箭头：-30度斜线 */}\n                  <svg style={{ position: 'absolute', bottom: '22%', left: 0, right: 0, maxWidth: '32px', maxHeight: '64px' }} width=\"32\" height=\"64\" viewBox=\"0 0 32 64\" fill=\"none\">\n                    <defs>\n                      <marker id=\"arrowhead2\" markerWidth=\"6\" markerHeight=\"6\" refX=\"4.8\" refY=\"3.2\" orient=\"auto\" markerUnits=\"strokeWidth\">\n                        <path d=\"M0,0 L6.4,3.2 L0,6.4 L1.6,3.2 L0,0\" fill=\"#a259ff\" />\n                      </marker>\n                    </defs>\n                    <line x1=\"6.4\" y1=\"52.8\" x2=\"25.6\" y2=\"16\" stroke=\"#a259ff\" strokeWidth=\"3.2\" markerEnd=\"url(#arrowhead2)\" />\n                  </svg>\n                </div>\n                {/* After 区域 */}\n                <div className=\"space-y-2 flex flex-col h-full justify-center\">\n                  <div className=\"text-sm font-medium text-center bg-gray-100 rounded-lg py-1 mb-1\">\n                    After\n                  </div>\n                  <div className=\"flex-1 flex flex-col justify-center\">\n                    <div className=\"aspect-square rounded-lg overflow-hidden max-w-[240px] max-h-[240px] mx-auto\">\n                      <Image\n                        src=\"/demo/result.png\"\n                        alt=\"After transformation\"\n                        width={240}\n                        height={240}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 984, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport ImageUploader from \"@/components/ImageUploader\";\nimport BackgroundSelector from \"@/components/BackgroundSelector\";\nimport CanvasEditor from \"@/components/CanvasEditor\";\nimport AIBlendButton from \"@/components/AIBlendButton\";\nimport HeroSection from '@/components/HeroSection';\n\ninterface Background {\n  id: string;\n  name: string;\n  url: string;\n}\n\nexport default function Home() {\n  const [originalImage, setOriginalImage] = useState<string | null>(null);\n  const [personImage, setPersonImage] = useState<string | null>(null);\n  const [selectedBackground, setSelectedBackground] = useState<Background | null>(null);\n  const [canvasImage, setCanvasImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [blendResult, setBlendResult] = useState<string | null>(null);\n\n  const handleImageUpload = async (file: File, dataUrl: string) => {\n    console.log(\"🖼️ 开始上传图片:\", {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n\n    setOriginalImage(dataUrl);\n    setIsProcessing(true);\n    setCurrentStep(2);\n\n    try {\n      // 创建 FormData 对象\n      const formData = new FormData();\n      formData.append(\"image\", file);\n      console.log(\"📦 已创建 FormData 对象\");\n\n      // 调用背景移除 API\n      console.log(\"🔄 正在调用背景移除 API...\");\n      const response = await fetch(\"/api/remove-background\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      console.log(\"📡 API 响应状态:\", response.status);\n      const data = await response.json();\n      console.log(\"📄 API 响应数据:\", data);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}, message: ${data.error || \"Unknown error\"}`);\n      }\n\n      if (data.success && data.result) {\n        console.log(\"✅ 背景移除成功\");\n        setPersonImage(data.result);\n        setCurrentStep(3);\n      } else {\n        throw new Error(data.error || \"背景移除失败\");\n      }\n    } catch (error) {\n      console.error(\"❌ 背景移除错误:\", error);\n      alert(`背景移除处理失败: ${error instanceof Error ? error.message : String(error)}`);\n      setCurrentStep(1);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleBackgroundSelect = (background: Background) => {\n    setSelectedBackground(background);\n    if (personImage) {\n      setCurrentStep(4);\n    }\n  };\n\n  const handleCanvasUpdate = (canvasDataUrl: string) => {\n    setCanvasImage(canvasDataUrl);\n  };\n\n  const handleBlendComplete = (blendedImage: string) => {\n    if (typeof blendedImage === \"string\") {\n      console.log(\"🎉 AI融合完成回调被触发\");\n      console.log(\"📦 融合结果:\", blendedImage.substring(0, 50) + \"...\");\n      setBlendResult(blendedImage);\n    } else {\n      console.log(\"🎉 AI融合完成回调被触发，但结果不是字符串:\", blendedImage);\n    }\n    setCurrentStep(5);\n  };\n\n  const resetToStart = () => {\n    setOriginalImage(null);\n    setPersonImage(null);\n    setSelectedBackground(null);\n    setCanvasImage(null);\n    setBlendResult(null);\n    setCurrentStep(1);\n  };\n\n  return (\n    <main>\n      <HeroSection />\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100\">\n       <div>\n          {/* 顶部标题+步骤条区域，纯白背景，适中上下间距，全屏宽度 */}\n          <div className=\"bg-white w-full py-12 mb-8\">\n            <header className=\"text-center mb-8\">\n              <h1 className=\"text-2xl font-bold text-[#22223b] mb-2\">\n                minecraftstyle.online\n              </h1>\n              <p className=\"text-lg text-[#a259ff]\">\n                AI-powered · Instantly create your own Minecraft-style pixel art portrait\n              </p>\n            </header>\n            <div className=\"max-w-4xl mx-auto mb-0\">\n              <div className=\"flex items-center justify-between gap-0\">\n                {[\n                  { step: 1, label: \"Upload Photo\" },\n                  { step: 2, label: \"Smart Cutout\" },\n                  { step: 3, label: \"Choose Pixel Background\" },\n                  { step: 4, label: \"Canvas Edit\" },\n                  { step: 5, label: \"AI Blend & Generate\" },\n                ].map(({ step, label }) => (\n                  <div key={step} className=\"flex items-center\">\n                    <div\n                      className={`\n                        w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold\n                        ${currentStep >= step\n                          ? \"bg-gradient-to-r from-[#7c3aed] via-[#a855f7] to-[#c084fc] text-white\"\n                          : \"bg-gray-200 text-gray-500\"\n                        }\n                      `}\n                    >\n                      {step}\n                    </div>\n                    <span className=\"text-xs text-gray-600 ml-1 hidden sm:block whitespace-nowrap\">\n                      {label}\n                    </span>\n                    {step < 5 && (\n                      <div\n                        className={`\n                          w-6 h-0.5 mx-1 rounded-full\n                          ${currentStep > step ? \"bg-[#a259ff]\" : \"bg-gray-200\"}\n                        `}\n                      />\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          </div>\n          <div className=\"container mx-auto px-4 py-8\">\n          {/* 主要内容区域 */}\n          <div className=\"max-w-2xl mx-auto\">\n            <div className=\"flex flex-col gap-6 items-center\">\n              {/* 步骤 1：图片上传 */}\n              <div className=\"bg-white rounded-lg p-6 shadow-sm w-full\">\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                  1. Upload Your Photo\n                </h2>\n                <ImageUploader\n                  onImageUpload={handleImageUpload}\n                  isLoading={isProcessing}\n                />\n              </div>\n\n              {/* 步骤 2：背景移除结果 */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm w-full\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    2. Smart Cutout Complete ✅\n                  </h2>\n                  <div>\n                    <p className=\"text-sm text-gray-600 mb-2\">Background removed:</p>\n                    <img\n                      src={personImage}\n                      alt=\"Photo with background removed\"\n                      className=\"w-full max-w-xs rounded-lg bg-gray-100 mx-auto\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* 步骤 3：背景选择 */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm w-full\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    3. Choose a Minecraft-style Background\n                  </h2>\n                  <BackgroundSelector\n                    onBackgroundSelect={handleBackgroundSelect}\n                    selectedBackground={selectedBackground}\n                  />\n                </div>\n              )}\n\n              {/* 步骤 4：画布编辑 */}\n              {personImage && selectedBackground && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm w-full\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    4. Canvas Edit · Drag/Scale Character\n                  </h2>\n                  <CanvasEditor\n                    personImage={personImage}\n                    background={selectedBackground}\n                    onCanvasUpdate={handleCanvasUpdate}\n                  />\n                </div>\n              )}\n\n              {/* 步骤 5：AI 融合 */}\n              {canvasImage && selectedBackground && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm w-full\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    5. AI Blend · One-click Pixel Art\n                  </h2>\n                  <AIBlendButton\n                    canvasImage={canvasImage}\n                    backgroundUrl={selectedBackground.url}\n                    disabled={!canvasImage || !selectedBackground}\n                    onBlendComplete={handleBlendComplete}\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* 重新开始按钮 */}\n            {currentStep > 1 && (\n              <div className=\"text-center mt-8\">\n                <button\n                  onClick={resetToStart}\n                  className=\"px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors\"\n                >\n                  Restart Experience\n                </button>\n              </div>\n            )}\n\n            {/* 融合结果展示与下载 */}\n            {blendResult && (\n              <div className=\"bg-white rounded-lg p-6 shadow-sm mt-8 text-center\">\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                  AI Blend Result · Download Your Pixel Art\n                </h2>\n                <img\n                  src={blendResult}\n                  alt=\"AI Blend Result\"\n                  className=\"w-full max-w-lg mx-auto rounded-lg border\"\n                  style={{ background: \"#eee\" }}\n                />\n                <a\n                  href={blendResult}\n                  download=\"minecraftstyle-art.png\"\n                  className=\"mt-4 inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition\"\n                >\n                  Download Pixel Art\n                </a>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}