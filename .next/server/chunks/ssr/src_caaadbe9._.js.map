{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/ImageUploader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\ninterface ImageUploaderProps {\n  onImageUpload: (file: File, dataUrl: string) => Promise<void>;\n  isLoading?: boolean;\n}\n\nexport default function ImageUploader({ onImageUpload, isLoading }: ImageUploaderProps) {\n  const [preview, setPreview] = useState<string | null>(null);\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        const dataUrl = reader.result as string;\n        setPreview(dataUrl);\n        await onImageUpload(file, dataUrl);\n      };\n      reader.readAsDataURL(file);\n    }\n  }, [onImageUpload]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      \"image/*\": [\".jpeg\", \".jpg\", \".png\", \".webp\"]\n    },\n    maxFiles: 1,\n    disabled: isLoading\n  });\n\n  return (\n    <div\n      {...getRootProps()}\n      className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n        isLoading\n          ? \"border-gray-300 bg-gray-50 cursor-not-allowed\"\n          : isDragActive\n          ? \"border-blue-500 bg-blue-50\"\n          : \"border-gray-300 hover:border-gray-400\"\n      }`}\n    >\n      <input {...getInputProps()} />\n      {isLoading ? (\n        <div className=\"text-gray-500\">\n          <p className=\"text-lg\">å¤„ç†ä¸­...</p>\n          <div className=\"mt-2 animate-spin rounded-full h-8 w-8 border-b-2 border-gray-500 mx-auto\"></div>\n        </div>\n      ) : preview ? (\n        <img src={preview} alt=\"Preview\" className=\"max-h-64 mx-auto\" />\n      ) : isDragActive ? (\n        <p className=\"text-lg text-blue-500\">æ‹–æ”¾å›¾ç‰‡åˆ°è¿™é‡Œ...</p>\n      ) : (\n        <p className=\"text-lg\">ç‚¹å‡»æˆ–æ‹–æ”¾å›¾ç‰‡åˆ°è¿™é‡Œä¸Šä¼ </p>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAHA;;;;AAUe,SAAS,cAAc,EAAE,aAAa,EAAE,SAAS,EAAsB;IACpF,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEtD,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAChC,MAAM,OAAO,aAAa,CAAC,EAAE;QAC7B,IAAI,MAAM;YACR,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACjB,MAAM,UAAU,OAAO,MAAM;gBAC7B,WAAW;gBACX,MAAM,cAAc,MAAM;YAC5B;YACA,OAAO,aAAa,CAAC;QACvB;IACF,GAAG;QAAC;KAAc;IAElB,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,wKAAA,CAAA,cAAW,AAAD,EAAE;QAChE;QACA,QAAQ;YACN,WAAW;gBAAC;gBAAS;gBAAQ;gBAAQ;aAAQ;QAC/C;QACA,UAAU;QACV,UAAU;IACZ;IAEA,qBACE,8OAAC;QACE,GAAG,cAAc;QAClB,WAAW,CAAC,oEAAoE,EAC9E,YACI,kDACA,eACA,+BACA,yCACJ;;0BAEF,8OAAC;gBAAO,GAAG,eAAe;;;;;;YACzB,0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAU;;;;;;kCACvB,8OAAC;wBAAI,WAAU;;;;;;;;;;;uBAEf,wBACF,8OAAC;gBAAI,KAAK;gBAAS,KAAI;gBAAU,WAAU;;;;;uBACzC,6BACF,8OAAC;gBAAE,WAAU;0BAAwB;;;;;qCAErC,8OAAC;gBAAE,WAAU;0BAAU;;;;;;;;;;;;AAI/B","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/BackgroundSelector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\n\ninterface Background {\n  id: string;\n  name: string;\n  url: string;\n}\n\ninterface BackgroundSelectorProps {\n  onBackgroundSelect: (background: Background) => void;\n  selectedBackground: Background | null;\n}\n\n// é»˜è®¤èƒŒæ™¯åˆ—è¡¨\nconst defaultBackgrounds: Background[] = [\n  {\n    id: \"1\",\n    name: \"è‰åŸ\",\n    url: \"/backgrounds/plains.jpg\"\n  },\n  {\n    id: \"2\",\n    name: \"æ²™æ¼ \",\n    url: \"/backgrounds/desert.jpg\"\n  },\n  {\n    id: \"3\",\n    name: \"é›ªåœ°\",\n    url: \"/backgrounds/snow.jpg\"\n  }\n];\n\nexport default function BackgroundSelector({ onBackgroundSelect, selectedBackground }: BackgroundSelectorProps) {\n  return (\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n      {defaultBackgrounds.map((bg) => (\n        <div\n          key={bg.id}\n          className={`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${\n            selectedBackground?.id === bg.id ? \"border-blue-500 scale-105\" : \"border-transparent hover:border-gray-300\"\n          }`}\n          onClick={() => onBackgroundSelect(bg)}\n        >\n          <img\n            src={bg.url}\n            alt={bg.name}\n            className=\"w-full h-32 object-cover\"\n          />\n          <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-2 text-sm\">\n            {bg.name}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAAA;;AAeA,SAAS;AACT,MAAM,qBAAmC;IACvC;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;IACA;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;IACA;QACE,IAAI;QACJ,MAAM;QACN,KAAK;IACP;CACD;AAEc,SAAS,mBAAmB,EAAE,kBAAkB,EAAE,kBAAkB,EAA2B;IAC5G,qBACE,8OAAC;QAAI,WAAU;kBACZ,mBAAmB,GAAG,CAAC,CAAC,mBACvB,8OAAC;gBAEC,WAAW,CAAC,2EAA2E,EACrF,oBAAoB,OAAO,GAAG,EAAE,GAAG,8BAA8B,4CACjE;gBACF,SAAS,IAAM,mBAAmB;;kCAElC,8OAAC;wBACC,KAAK,GAAG,GAAG;wBACX,KAAK,GAAG,IAAI;wBACZ,WAAU;;;;;;kCAEZ,8OAAC;wBAAI,WAAU;kCACZ,GAAG,IAAI;;;;;;;eAZL,GAAG,EAAE;;;;;;;;;;AAkBpB","debugId":null}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/CanvasEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\n\ninterface CanvasEditorProps {\n  personImage: string | null;\n  background: { url: string } | null;\n  onCanvasUpdate: (dataUrl: string) => void;\n}\n\nexport default function CanvasEditor({ personImage, background, onCanvasUpdate }: CanvasEditorProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [scale, setScale] = useState(1);\n\n  useEffect(() => {\n    if (!canvasRef.current || !personImage || !background) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return;\n\n    const bgImg = new Image();\n    const fgImg = new Image();\n\n    bgImg.onload = () => {\n      canvas.width = bgImg.width;\n      canvas.height = bgImg.height;\n      ctx.drawImage(bgImg, 0, 0);\n\n      fgImg.src = personImage;\n    };\n\n    fgImg.onload = () => {\n      const scaledWidth = fgImg.width * scale;\n      const scaledHeight = fgImg.height * scale;\n      ctx.drawImage(fgImg, position.x, position.y, scaledWidth, scaledHeight);\n      onCanvasUpdate(canvas.toDataURL());\n    };\n\n    bgImg.src = background.url;\n  }, [personImage, background, position, scale, onCanvasUpdate]);\n\n  // ä¿®å¤æ»šè½®ç¼©æ”¾ passive è­¦å‘Š\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    function handleWheel(e: WheelEvent) {\n      e.preventDefault();\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      setScale(prev => Math.max(0.1, Math.min(5, prev * delta)));\n    }\n    canvas.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => {\n      canvas.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, []);\n\n  const handleMouseDown = () => {\n    setIsDragging(true);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDragging) return;\n    setPosition(prev => ({\n      x: prev.x + e.movementX,\n      y: prev.y + e.movementY\n    }));\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  return (\n    <div className=\"relative w-full aspect-video\">\n      <canvas\n        ref={canvasRef}\n        className=\"w-full h-full object-contain cursor-move\"\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n      />\n      <div className=\"absolute bottom-4 left-4 bg-black bg-opacity-50 text-white p-2 rounded text-sm\">\n        ä½¿ç”¨é¼ æ ‡æ‹–åŠ¨è°ƒæ•´ä½ç½®ï¼Œæ»šè½®è°ƒæ•´å¤§å°\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AAFA;;;AAUe,SAAS,aAAa,EAAE,WAAW,EAAE,UAAU,EAAE,cAAc,EAAqB;IACjG,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAqB;IAC5C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,GAAG;QAAG,GAAG;IAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY;QAEvD,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QAEV,MAAM,QAAQ,IAAI;QAClB,MAAM,QAAQ,IAAI;QAElB,MAAM,MAAM,GAAG;YACb,OAAO,KAAK,GAAG,MAAM,KAAK;YAC1B,OAAO,MAAM,GAAG,MAAM,MAAM;YAC5B,IAAI,SAAS,CAAC,OAAO,GAAG;YAExB,MAAM,GAAG,GAAG;QACd;QAEA,MAAM,MAAM,GAAG;YACb,MAAM,cAAc,MAAM,KAAK,GAAG;YAClC,MAAM,eAAe,MAAM,MAAM,GAAG;YACpC,IAAI,SAAS,CAAC,OAAO,SAAS,CAAC,EAAE,SAAS,CAAC,EAAE,aAAa;YAC1D,eAAe,OAAO,SAAS;QACjC;QAEA,MAAM,GAAG,GAAG,WAAW,GAAG;IAC5B,GAAG;QAAC;QAAa;QAAY;QAAU;QAAO;KAAe;IAE7D,oBAAoB;IACpB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QACb,SAAS,YAAY,CAAa;YAChC,EAAE,cAAc;YAChB,MAAM,QAAQ,EAAE,MAAM,GAAG,IAAI,MAAM;YACnC,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,OAAO;QACpD;QACA,OAAO,gBAAgB,CAAC,SAAS,aAAa;YAAE,SAAS;QAAM;QAC/D,OAAO;YACL,OAAO,mBAAmB,CAAC,SAAS;QACtC;IACF,GAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,cAAc;IAChB;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,YAAY;QACjB,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,KAAK,CAAC,GAAG,EAAE,SAAS;gBACvB,GAAG,KAAK,CAAC,GAAG,EAAE,SAAS;YACzB,CAAC;IACH;IAEA,MAAM,gBAAgB;QACpB,cAAc;IAChB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,KAAK;gBACL,WAAU;gBACV,aAAa;gBACb,aAAa;gBACb,WAAW;gBACX,cAAc;;;;;;0BAEhB,8OAAC;gBAAI,WAAU;0BAAiF;;;;;;;;;;;;AAKtG","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/components/AIBlendButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface AIBlendButtonProps {\n  canvasImage: string | null;\n  backgroundUrl: string;\n  disabled?: boolean;\n  onBlendComplete: (blendedImage: string) => void;\n}\n\nexport default function AIBlendButton({\n  canvasImage,\n  backgroundUrl,\n  disabled = false,\n  onBlendComplete,\n}: AIBlendButtonProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleClick = async () => {\n    console.log(\"ğŸ¯ AIèåˆæŒ‰é’®è¢«ç‚¹å‡»\");\n    console.log(\"ğŸ“¦ å½“å‰çŠ¶æ€:\", {\n      hasCanvasImage: !!canvasImage,\n      backgroundUrl,\n      disabled,\n      isLoading\n    });\n\n    if (!canvasImage) {\n      console.error(\"âŒ é”™è¯¯ï¼šcanvasImage ä¸ºç©º\");\n      setError(\"è¯·å…ˆè°ƒæ•´äººç‰©ä½ç½®\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log(\"ğŸ”„ å¼€å§‹è½¬æ¢èƒŒæ™¯å›¾ä¸º base64...\");\n      // å°†èƒŒæ™¯å›¾è½¬æ¢ä¸º base64\n      const backgroundResponse = await fetch(backgroundUrl);\n      const backgroundBlob = await backgroundResponse.blob();\n      const backgroundBase64 = await new Promise<string>((resolve) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsDataURL(backgroundBlob);\n      });\n\n      console.log(\"âœ… èƒŒæ™¯å›¾è½¬æ¢å®Œæˆ\");\n\n      console.log(\"ğŸ”„ å¼€å§‹è°ƒç”¨ AI èåˆ API...\");\n      const response = await fetch(\"/api/ai-blend\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          foreground: canvasImage,\n          background: backgroundBase64,\n        }),\n      });\n\n      console.log(\"ğŸ“¡ API å“åº”çŠ¶æ€:\", response.status);\n      const data = await response.json();\n      console.log(\"ğŸ“„ API å“åº”æ•°æ®:\", data);\n\n      if (!response.ok) {\n        throw new Error(data.error || `HTTP error! status: ${response.status}`);\n      }\n\n      if (!data.result) {\n        throw new Error(\"AI èåˆå¤±è´¥ï¼šæœªè¿”å›ç»“æœ\");\n      }\n\n      console.log(\"âœ… AI èåˆæˆåŠŸï¼Œè°ƒç”¨ onBlendComplete\");\n      onBlendComplete(data.result);\n    } catch (error) {\n      console.error(\"âŒ AI èåˆé”™è¯¯:\", error);\n      setError(error instanceof Error ? error.message : \"AI èåˆå¤±è´¥ï¼Œè¯·é‡è¯•\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <button\n        onClick={handleClick}\n        disabled={disabled || isLoading || !canvasImage}\n        className={`\n          w-full py-2 px-4 rounded-md font-medium\n          ${disabled || isLoading || !canvasImage\n            ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n            : \"bg-blue-600 text-white hover:bg-blue-700\"\n          }\n          transition-colors duration-200\n          flex items-center justify-center\n        `}\n      >\n        {isLoading ? (\n          <>\n            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            æ­£åœ¨èåˆä¸­...\n          </>\n        ) : (\n          \"å¼€å§‹ AI èåˆ\"\n        )}\n      </button>\n      \n      {error && (\n        <div className=\"text-sm text-red-500 bg-red-50 p-3 rounded-md\">\n          {error}\n        </div>\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,cAAc,EACpC,WAAW,EACX,aAAa,EACb,WAAW,KAAK,EAChB,eAAe,EACI;IACnB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,cAAc;QAClB,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,YAAY;YACtB,gBAAgB,CAAC,CAAC;YAClB;YACA;YACA;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,QAAQ,KAAK,CAAC;YACd,SAAS;YACT;QACF;QAEA,aAAa;QACb,SAAS;QAET,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,iBAAiB;YACjB,MAAM,qBAAqB,MAAM,MAAM;YACvC,MAAM,iBAAiB,MAAM,mBAAmB,IAAI;YACpD,MAAM,mBAAmB,MAAM,IAAI,QAAgB,CAAC;gBAClD,MAAM,SAAS,IAAI;gBACnB,OAAO,SAAS,GAAG,IAAM,QAAQ,OAAO,MAAM;gBAC9C,OAAO,aAAa,CAAC;YACvB;YAEA,QAAQ,GAAG,CAAC;YAEZ,QAAQ,GAAG,CAAC;YACZ,MAAM,WAAW,MAAM,MAAM,iBAAiB;gBAC5C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,YAAY;oBACZ,YAAY;gBACd;YACF;YAEA,QAAQ,GAAG,CAAC,gBAAgB,SAAS,MAAM;YAC3C,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,gBAAgB;YAE5B,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YACxE;YAEA,IAAI,CAAC,KAAK,MAAM,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC;YACZ,gBAAgB,KAAK,MAAM;QAC7B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS;gBACT,UAAU,YAAY,aAAa,CAAC;gBACpC,WAAW,CAAC;;UAEV,EAAE,YAAY,aAAa,CAAC,cACxB,iDACA,2CACH;;;QAGH,CAAC;0BAEA,0BACC;;sCACE,8OAAC,iNAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;wBAA8B;;mCAInD;;;;;;YAIH,uBACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport ImageUploader from \"@/components/ImageUploader\";\nimport BackgroundSelector from \"@/components/BackgroundSelector\";\nimport CanvasEditor from \"@/components/CanvasEditor\";\nimport AIBlendButton from \"@/components/AIBlendButton\";\n\ninterface Background {\n  id: string;\n  name: string;\n  url: string;\n}\n\nexport default function Home() {\n  const [originalImage, setOriginalImage] = useState<string | null>(null);\n  const [personImage, setPersonImage] = useState<string | null>(null);\n  const [selectedBackground, setSelectedBackground] = useState<Background | null>(null);\n  const [canvasImage, setCanvasImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const handleImageUpload = async (file: File, dataUrl: string) => {\n    console.log(\"ğŸ–¼ï¸ å¼€å§‹ä¸Šä¼ å›¾ç‰‡:\", {\n      name: file.name,\n      type: file.type,\n      size: file.size\n    });\n\n    setOriginalImage(dataUrl);\n    setIsProcessing(true);\n    setCurrentStep(2);\n\n    try {\n      // åˆ›å»º FormData å¯¹è±¡\n      const formData = new FormData();\n      formData.append(\"image\", file);\n      console.log(\"ğŸ“¦ å·²åˆ›å»º FormData å¯¹è±¡\");\n\n      // è°ƒç”¨èƒŒæ™¯ç§»é™¤ API\n      console.log(\"ğŸ”„ æ­£åœ¨è°ƒç”¨èƒŒæ™¯ç§»é™¤ API...\");\n      const response = await fetch(\"/api/remove-background\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      console.log(\"ğŸ“¡ API å“åº”çŠ¶æ€:\", response.status);\n      const data = await response.json();\n      console.log(\"ğŸ“„ API å“åº”æ•°æ®:\", data);\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}, message: ${data.error || \"Unknown error\"}`);\n      }\n\n      if (data.success && data.result) {\n        console.log(\"âœ… èƒŒæ™¯ç§»é™¤æˆåŠŸ\");\n        setPersonImage(data.result);\n        setCurrentStep(3);\n      } else {\n        throw new Error(data.error || \"èƒŒæ™¯ç§»é™¤å¤±è´¥\");\n      }\n    } catch (error) {\n      console.error(\"âŒ èƒŒæ™¯ç§»é™¤é”™è¯¯:\", error);\n      alert(`èƒŒæ™¯ç§»é™¤å¤„ç†å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`);\n      setCurrentStep(1);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleBackgroundSelect = (background: Background) => {\n    setSelectedBackground(background);\n    if (personImage) {\n      setCurrentStep(4);\n    }\n  };\n\n  const handleCanvasUpdate = (canvasDataUrl: string) => {\n    setCanvasImage(canvasDataUrl);\n  };\n\n  const handleBlendComplete = (blendedImage: string) => {\n    console.log(\"ï¿½ï¿½ AIèåˆå®Œæˆå›è°ƒè¢«è§¦å‘\");\n    console.log(\"ğŸ“¦ èåˆç»“æœ:\", blendedImage?.substring(0, 50) + \"...\");\n    setCurrentStep(5);\n  };\n\n  const resetToStart = () => {\n    setOriginalImage(null);\n    setPersonImage(null);\n    setSelectedBackground(null);\n    setCanvasImage(null);\n    setCurrentStep(1);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-green-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* æ ‡é¢˜ */}\n        <header className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-green-800 mb-2\">\n            MinecraftMe\n          </h1>\n          <p className=\"text-lg text-green-600\">\n            å°†æ‚¨çš„ç…§ç‰‡èå…¥ Minecraft ä¸–ç•Œ âœ¨\n          </p>\n        </header>\n\n        {/* è¿›åº¦æŒ‡ç¤ºå™¨ */}\n        <div className=\"max-w-4xl mx-auto mb-8\">\n          <div className=\"flex items-center justify-between\">\n            {[\n              { step: 1, label: \"ä¸Šä¼ ç…§ç‰‡\" },\n              { step: 2, label: \"ç§»é™¤èƒŒæ™¯\" },\n              { step: 3, label: \"é€‰æ‹©èƒŒæ™¯\" },\n              { step: 4, label: \"è°ƒæ•´ä½ç½®\" },\n              { step: 5, label: \"AI èåˆ\" },\n            ].map(({ step, label }) => (\n              <div key={step} className=\"flex items-center\">\n                <div\n                  className={`\n                    w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold\n                    ${currentStep >= step\n                      ? \"bg-green-500 text-white\"\n                      : \"bg-gray-200 text-gray-500\"\n                    }\n                  `}\n                >\n                  {step}\n                </div>\n                <span className=\"text-sm text-gray-600 ml-2 hidden sm:block\">\n                  {label}\n                </span>\n                {step < 5 && (\n                  <div\n                    className={`\n                      w-8 h-1 mx-2\n                      ${currentStep > step ? \"bg-green-500\" : \"bg-gray-200\"}\n                    `}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* å·¦ä¾§ï¼šæ§åˆ¶é¢æ¿ */}\n            <div className=\"space-y-6\">\n              {/* æ­¥éª¤ 1ï¼šå›¾ç‰‡ä¸Šä¼  */}\n              <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                  1. ä¸Šä¼ æ‚¨çš„ç…§ç‰‡\n                </h2>\n                <ImageUploader\n                  onImageUpload={handleImageUpload}\n                  isLoading={isProcessing}\n                />\n              </div>\n\n              {/* æ­¥éª¤ 2ï¼šèƒŒæ™¯ç§»é™¤ç»“æœ */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    2. èƒŒæ™¯ç§»é™¤å®Œæˆ âœ…\n                  </h2>\n                  <div>\n                    <p className=\"text-sm text-gray-600 mb-2\">å·²ç§»é™¤èƒŒæ™¯ï¼š</p>\n                    <img\n                      src={personImage}\n                      alt=\"å·²ç§»é™¤èƒŒæ™¯çš„ç…§ç‰‡\"\n                      className=\"w-full max-w-xs rounded-lg bg-gray-100\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* æ­¥éª¤ 3ï¼šèƒŒæ™¯é€‰æ‹© */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    3. é€‰æ‹© Minecraft èƒŒæ™¯\n                  </h2>\n                  <BackgroundSelector\n                    onBackgroundSelect={handleBackgroundSelect}\n                    selectedBackground={selectedBackground}\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* å³ä¾§ï¼šç”»å¸ƒå’Œ AI èåˆ */}\n            <div className=\"space-y-6\">\n              {/* æ­¥éª¤ 4ï¼šç”»å¸ƒç¼–è¾‘ */}\n              {personImage && selectedBackground && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    4. è°ƒæ•´äººç‰©ä½ç½®\n                  </h2>\n                  <CanvasEditor\n                    personImage={personImage}\n                    background={selectedBackground}\n                    onCanvasUpdate={handleCanvasUpdate}\n                  />\n                </div>\n              )}\n\n              {/* æ­¥éª¤ 5ï¼šAI èåˆ */}\n              {canvasImage && selectedBackground && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    5. AI é­”æ³•èåˆ\n                  </h2>\n                  <AIBlendButton\n                    canvasImage={canvasImage}\n                    backgroundUrl={selectedBackground.url}\n                    disabled={!canvasImage || !selectedBackground}\n                    onBlendComplete={handleBlendComplete}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* é‡æ–°å¼€å§‹æŒ‰é’® */}\n          {currentStep > 1 && (\n            <div className=\"text-center mt-8\">\n              <button\n                onClick={resetToStart}\n                className=\"px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors\"\n              >\n                é‡æ–°å¼€å§‹\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}