{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/haotian/mini/%E3%80%80code/MinecraftMe-AI-Photo-Blender/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport ImageUploader from \"@/components/ImageUploader\";\nimport BackgroundSelector from \"@/components/BackgroundSelector\";\nimport CanvasEditor from \"@/components/CanvasEditor\";\nimport AIBlendButton from \"@/components/AIBlendButton\";\n\ninterface Background {\n  id: string;\n  name: string;\n  url: string;\n  preview: string;\n}\n\nexport default function Home() {\n  const [originalImage, setOriginalImage] = useState<string | null>(null);\n  const [personImage, setPersonImage] = useState<string | null>(null);\n  const [selectedBackground, setSelectedBackground] = useState<Background | null>(null);\n  const [canvasImage, setCanvasImage] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const handleImageUpload = async (file: File, dataUrl: string) => {\n    setOriginalImage(dataUrl);\n    setIsProcessing(true);\n    setCurrentStep(2);\n\n    try {\n      // Create FormData to send file\n      const formData = new FormData();\n      formData.append(\"image\", file);\n\n      // Call background removal API\n      const response = await fetch(\"/api/remove-background\", {\n        method: \"POST\",\n        body: formData, // Use FormData instead of JSON\n      });\n\n      const data = await response.json();\n\n      if (data.success && data.result) {\n        const resultImage = Array.isArray(data.result) ? data.result[0] : data.result;\n        setPersonImage(resultImage);\n        setCurrentStep(3);\n\n        // Show demo mode message\n        if (data.message) {\n          console.log(\"API Message:\", data.message);\n        }\n      } else {\n        alert(`Background removal failed: ${data.error || \"Unknown error\"}`);\n        setCurrentStep(1);\n      }\n    } catch (error) {\n      console.error(\"Background removal error:\", error);\n      alert(\"Background removal processing failed\");\n      setCurrentStep(1);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleBackgroundSelect = (background: Background) => {\n    setSelectedBackground(background);\n    if (personImage) {\n      setCurrentStep(4);\n    }\n  };\n\n  const handleCanvasUpdate = (canvasDataUrl: string) => {\n    setCanvasImage(canvasDataUrl);\n  };\n\n  const handleBlendComplete = (blendedImage: string) => {\n    setCurrentStep(5);\n  };\n\n  const resetToStart = () => {\n    setOriginalImage(null);\n    setPersonImage(null);\n    setSelectedBackground(null);\n    setCanvasImage(null);\n    setCurrentStep(1);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-green-100\">\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <header className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-green-800 mb-2\">\n            MinecraftMe\n          </h1>\n          <p className=\"text-lg text-green-600\">\n            Transform your photos into Minecraft worlds âœ¨\n          </p>\n\n          {/* Demo mode notification */}\n          <div className=\"mt-4 p-3 bg-yellow-100 border border-yellow-300 rounded-lg max-w-2xl mx-auto\">\n            <p className=\"text-sm text-yellow-800\">\n              ðŸŽ® <strong>Demo Mode</strong> - This is a feature demonstration version. Real AI background removal and blending requires Replicate API configuration.\n            </p>\n          </div>\n        </header>\n\n        {/* Progress indicator */}\n        <div className=\"max-w-4xl mx-auto mb-8\">\n          <div className=\"flex items-center justify-between\">\n            {[\n              { step: 1, label: \"Upload Photo\" },\n              { step: 2, label: \"Remove Background\" },\n              { step: 3, label: \"Choose Background\" },\n              { step: 4, label: \"Adjust Position\" },\n              { step: 5, label: \"AI Blend\" },\n            ].map(({ step, label }) => (\n              <div key={step} className=\"flex items-center\">\n                <div\n                  className={`\n                    w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold\n                    ${currentStep >= step\n                      ? \"bg-green-500 text-white\"\n                      : \"bg-gray-200 text-gray-500\"\n                    }\n                  `}\n                >\n                  {step}\n                </div>\n                <span className=\"text-sm text-gray-600 ml-2 hidden sm:block\">\n                  {label}\n                </span>\n                {step < 5 && (\n                  <div\n                    className={`\n                      w-8 h-1 mx-2\n                      ${currentStep > step ? \"bg-green-500\" : \"bg-gray-200\"}\n                    `}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Main content area */}\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Left side: Control panel */}\n            <div className=\"space-y-6\">\n              {/* Step 1: Image upload */}\n              <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                  1. Upload Your Photo\n                </h2>\n                <ImageUploader\n                  onImageUpload={handleImageUpload}\n                  isLoading={isProcessing}\n                />\n\n                {originalImage && (\n                  <div className=\"mt-4\">\n                    <p className=\"text-sm text-gray-600 mb-2\">Original image:</p>\n                    <img\n                      src={originalImage}\n                      alt=\"Original photo\"\n                      className=\"w-full max-w-xs rounded-lg\"\n                    />\n                  </div>\n                )}\n              </div>\n\n              {/* Step 2: Background removal result */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    2. Background Removal Complete âœ…\n                  </h2>\n                  <div>\n                    <p className=\"text-sm text-gray-600 mb-2\">Background removed:</p>\n                    <img\n                      src={personImage}\n                      alt=\"Background removed photo\"\n                      className=\"w-full max-w-xs rounded-lg bg-gray-100\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Step 3: Background selection */}\n              {personImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    3. Choose Minecraft Background\n                  </h2>\n                  <BackgroundSelector\n                    onBackgroundSelect={handleBackgroundSelect}\n                    selectedBackground={selectedBackground}\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Right side: Canvas and AI blending */}\n            <div className=\"space-y-6\">\n              {/* Step 4: Canvas editing */}\n              {personImage && selectedBackground && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    4. Adjust Portrait Position\n                  </h2>\n                  <CanvasEditor\n                    personImage={personImage}\n                    background={selectedBackground}\n                    onCanvasUpdate={handleCanvasUpdate}\n                  />\n                </div>\n              )}\n\n              {/* Step 5: AI blending */}\n              {canvasImage && (\n                <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n                  <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    5. AI Magic Blending\n                  </h2>\n                  <AIBlendButton\n                    canvasImage={canvasImage}\n                    disabled={!canvasImage}\n                    onBlendComplete={handleBlendComplete}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Restart button */}\n          {currentStep > 1 && (\n            <div className=\"text-center mt-8\">\n              <button\n                onClick={resetToStart}\n                className=\"px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors\"\n              >\n                Start Over\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <footer className=\"text-center mt-12 text-gray-500\">\n          <p>Use AI technology to perfectly blend your photos into Minecraft worlds</p>\n          <div className=\"mt-2 text-xs text-gray-400\">\n            <p>Demo version - Configure Replicate API to enable real AI processing features</p>\n          </div>\n        </footer>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}